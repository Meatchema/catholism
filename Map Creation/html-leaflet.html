<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive World Map</title>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet/dist/leaflet.css"
  />

  <!-- Inline CSS -->
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }

  #map {
    height: 100vh;  /* full screen */
    width: 100%;
  }
  
  /* Side panel */
  .side-panel {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 300px;
    padding: 15px;
    border: 1px solid #ccc;
    background: white;
    box-sizing: border-box;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    border-radius: 5px;
    z-index: 1000;
    max-height: 80vh;
    overflow-y: auto;
  }
  
  .side-panel h1 {
    margin: 0 0 10px 0;
    font-size: 1.2rem;
    color: #333;
  }
  
  #info-desc {
    line-height: 1.5;
    color: #555;
    font-size: 0.9rem;
  }
    /* Legend styles */
    .legend {
      background: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 15px rgba(0,0,0,0.2);
      line-height: 24px;
      font-family: Arial, sans-serif;
      font-size: 14px;
    }
    
    .legend h4 {
      margin: 0 0 10px 0;
      font-size: 16px;
    }
    
    .legend i {
      width: 18px;
      height: 18px;
      float: left;
      margin-right: 8px;
      border-radius: 50%;
    }
    
    .legend .sspx {
      background: #f03;
      border: 2px solid red;
    }
    
    .legend .extremist {
      background: #03f;
      border: 2px solid blue;
    }
  </style>
</head>

<body>
  <!-- Map container -->
  <div id="map"></div>
    <div class="side-panel">
    <h1 id="info-title">Select a location</h1>
    <div id="info-desc">Click a marker on the map to see details here.</div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Map setup script -->
  <script>
    // Initialize the map
    const map = L.map('map').setView([20, 0], 2); // center on world

    // Add map tiles (background)
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Example clickable locations
    // ============================================================================
// SSPX (Society of St. Pius X) - Recognize Pope but resist Vatican II
// ============================================================================

// SSPX Headquarters
const sspxHeadquarters = [
  {
    name: "Écône, Switzerland",
    coords: [46.229, 7.352],
    info: "<strong>SSPX International Headquarters</strong><br>Founded by Archbishop Lefebvre.<br>Major European base of operations."
  },
  {
    name: "Menzingen, Switzerland",
    coords: [47.1833, 8.5833],
    info: "<strong>SSPX General House</strong><br>Administrative center."
  },
  {
    name: "Rome, Italy",
    coords: [41.9028, 12.4964],
    info: "<strong>Rome Office</strong><br>Frequent site of dialogue with Vatican officials."
  }
];

// SSPX USA Districts & Major Locations
const sspxUSA = [
  {
    name: "Kansas City, Missouri",
    coords: [39.0997, -94.5786],
    info: "<strong>SSPX USA Headquarters</strong><br>Oversees American district operations."
  },
  {
    name: "Post Falls, Idaho",
    coords: [47.7177, -116.9516],
    info: "<strong>Western District HQ</strong><br>Serves western United States."
  },
  {
    name: "St. Marys, Kansas",
    coords: [39.1942, -96.0722],
    info: "<strong>Central District HQ</strong><br>Home to SSPX academy and community."
  },
  {
    name: "Ridgefield, Connecticut",
    coords: [41.2815, -73.4982],
    info: "<strong>Eastern District HQ</strong><br>Serves northeastern United States."
  },
  {
    name: "Winona, Minnesota",
    coords: [44.0499, -91.6393],
    info: "<strong>Seminary of the Holy Cross</strong><br>SSPX seminary USA."
  },
  {
    name: "Sanford, Florida",
    coords: [28.8003, -81.2690],
    info: "<strong>Our Lady of LaSalette Chapel</strong><br>Florida priory."
  },
  {
    name: "Austin, Texas",
    coords: [30.2672, -97.7431],
    info: "<strong>Queen of Angels Chapel</strong><br>Texas operations."
  },
  {
    name: "Los Angeles, California",
    coords: [34.0522, -118.2437],
    info: "<strong>St. Joseph Chapel</strong><br>California priory."
  },
  {
    name: "Sacramento, California",
    coords: [38.5816, -121.4944],
    info: "<strong>Our Lady of Fatima Chapel</strong><br>Northern California."
  },
  {
    name: "Phoenix, Arizona",
    coords: [33.4484, -112.0740],
    info: "<strong>Mater Dei Chapel</strong><br>Arizona priory."
  },
  {
    name: "Denver, Colorado",
    coords: [39.7392, -104.9903],
    info: "<strong>St. Pius V Chapel</strong><br>Colorado operations."
  },
  {
    name: "Cincinnati, Ohio",
    coords: [39.1031, -84.5120],
    info: "<strong>St. Pius V Chapel</strong><br>Ohio priory."
  },
  {
    name: "Chicago, Illinois",
    coords: [41.8781, -87.6298],
    info: "<strong>St. Pius V Chapel</strong><br>Illinois operations."
  },
  {
    name: "Detroit, Michigan",
    coords: [42.3314, -83.0458],
    info: "<strong>Our Lady of Sorrows</strong><br>Michigan priory."
  },
  {
    name: "St. Paul, Minnesota",
    coords: [44.9537, -93.0900],
    info: "<strong>Resurrection Chapel</strong><br>Minnesota operations."
  },
  {
    name: "Seattle, Washington",
    coords: [47.6062, -122.3321],
    info: "<strong>Holy Rosary Chapel</strong><br>Pacific Northwest."
  },
  {
    name: "Portland, Oregon",
    coords: [45.5152, -122.6784],
    info: "<strong>Immaculate Heart Chapel</strong><br>Oregon operations."
  }
];

// SSPX Canada
const sspxCanada = [
  {
    name: "Toronto, Canada",
    coords: [43.6532, -79.3832],
    info: "<strong>Canadian District HQ</strong><br>Serves English Canada."
  },
  {
    name: "Montreal, Canada",
    coords: [45.5017, -73.5673],
    info: "<strong>French Canada District</strong><br>Major francophone center."
  },
  {
    name: "Vancouver, Canada",
    coords: [49.2827, -123.1207],
    info: "<strong>St. Pius X Priory</strong><br>Western Canada."
  }
];

// SSPX Europe
const sspxEurope = [
  {
    name: "Paris, France",
    coords: [48.8566, 2.3522],
    info: "<strong>France District HQ</strong><br>One of the largest SSPX districts globally."
  },
  {
    name: "Lyon, France",
    coords: [45.7640, 4.8357],
    info: "<strong>Regional Priory</strong><br>Southern France operations."
  },
  {
    name: "Bordeaux, France",
    coords: [44.8378, -0.5792],
    info: "<strong>St. Michel Priory</strong><br>Southwest France."
  },
  {
    name: "Stuttgart, Germany",
    coords: [48.7758, 9.1829],
    info: "<strong>Germany District HQ</strong><br>Central European operations."
  },
  {
    name: "Munich, Germany",
    coords: [48.1351, 11.5820],
    info: "<strong>St. Theresia Priory</strong><br>Southern Germany."
  },
  {
    name: "Berlin, Germany",
    coords: [52.5200, 13.4050],
    info: "<strong>Northern Germany Chapel</strong><br>Berlin operations."
  },
  {
    name: "London, United Kingdom",
    coords: [51.5074, -0.1278],
    info: "<strong>Great Britain District HQ</strong><br>Serves UK and Ireland."
  },
  {
    name: "Dublin, Ireland",
    coords: [53.3498, -6.2603],
    info: "<strong>Irish Priory</strong><br>Serves Ireland."
  },
  {
    name: "Vienna, Austria",
    coords: [48.2082, 16.3738],
    info: "<strong>Austria District HQ</strong><br>Central European base."
  },
  {
    name: "Warsaw, Poland",
    coords: [52.2297, 21.0122],
    info: "<strong>Poland District</strong><br>Growing Eastern European presence."
  },
  {
    name: "Brussels, Belgium",
    coords: [50.8503, 4.3517],
    info: "<strong>Belgium Priory</strong><br>Benelux operations."
  },
  {
    name: "Amsterdam, Netherlands",
    coords: [52.3676, 4.9041],
    info: "<strong>Netherlands Chapel</strong><br>Dutch operations."
  },
  {
    name: "Madrid, Spain",
    coords: [40.4168, -3.7038],
    info: "<strong>Spain District</strong><br>Iberian operations."
  },
  {
    name: "Milan, Italy",
    coords: [45.4642, 9.1900],
    info: "<strong>Northern Italy Priory</strong><br>Italian operations."
  },
  {
    name: "Lisbon, Portugal",
    coords: [38.7223, -9.1393],
    info: "<strong>Portugal Chapel</strong><br>Portuguese operations."
  },
  {
    name: "Prague, Czech Republic",
    coords: [50.0755, 14.4378],
    info: "<strong>Czech Priory</strong><br>Central Europe."
  },
  {
    name: "Budapest, Hungary",
    coords: [47.4979, 19.0402],
    info: "<strong>Hungary Chapel</strong><br>Eastern Europe."
  },
  {
    name: "Zaitzkofen, Germany",
    coords: [48.9667, 12.3667],
    info: "<strong>Seminary of the Sacred Heart</strong><br>European seminary."
  },
  {
    name: "Flavigny, France",
    coords: [47.5167, 4.5333],
    info: "<strong>Convent & School</strong><br>French educational center."
  }
];

// SSPX Latin America
const sspxLatinAmerica = [
  {
    name: "Buenos Aires, Argentina",
    coords: [-34.6037, -58.3816],
    info: "<strong>South America District HQ</strong><br>Major Argentine presence."
  },
  {
    name: "La Reja, Argentina",
    coords: [-34.6333, -58.8333],
    info: "<strong>Seminary of Our Lady Co-Redemptrix</strong><br>South American seminary."
  },
  {
    name: "Bogotá, Colombia",
    coords: [4.7110, -74.0721],
    info: "<strong>Colombia Priory</strong><br>Northern South America."
  },
  {
    name: "Mexico City, Mexico",
    coords: [19.4326, -99.1332],
    info: "<strong>Mexico District HQ</strong><br>Central America operations."
  },
  {
    name: "São Paulo, Brazil",
    coords: [-23.5505, -46.6333],
    info: "<strong>Brazil District</strong><br>Largest South American presence."
  },
  {
    name: "Santiago, Chile",
    coords: [-33.4489, -70.6693],
    info: "<strong>Chile Priory</strong><br>Southern cone operations."
  },
  {
    name: "Lima, Peru",
    coords: [-12.0464, -77.0428],
    info: "<strong>Peru Chapel</strong><br>Andean region."
  },
  {
    name: "Guadalajara, Mexico",
    coords: [20.6597, -103.3496],
    info: "<strong>Western Mexico Priory</strong><br>Regional operations."
  }
];

// SSPX Asia & Oceania
const sspxAsiaPacific = [
  {
    name: "Manila, Philippines",
    coords: [14.5995, 120.9842],
    info: "<strong>Asia District HQ</strong><br>Serves Asian communities."
  },
  {
    name: "Singapore",
    coords: [1.3521, 103.8198],
    info: "<strong>Southeast Asia Chapel</strong><br>Regional center."
  },
  {
    name: "Seoul, South Korea",
    coords: [37.5665, 126.9780],
    info: "<strong>Korean Mission</strong><br>East Asia operations."
  },
  {
    name: "Tokyo, Japan",
    coords: [35.6762, 139.6503],
    info: "<strong>Japan Chapel</strong><br>Japanese mission."
  },
  {
    name: "Melbourne, Australia",
    coords: [-37.8136, 144.9631],
    info: "<strong>Australia District HQ</strong><br>Serves Australia and New Zealand."
  },
  {
    name: "Sydney, Australia",
    coords: [-33.8688, 151.2093],
    info: "<strong>St. Pius X Priory</strong><br>Eastern Australia."
  },
  {
    name: "Auckland, New Zealand",
    coords: [-36.8485, 174.7633],
    info: "<strong>New Zealand Chapel</strong><br>Oceania operations."
  }
];

// SSPX Africa
const sspxAfrica = [
  {
    name: "Libreville, Gabon",
    coords: [0.4162, 9.4673],
    info: "<strong>Africa District HQ</strong><br>Central African operations."
  },
  {
    name: "Nairobi, Kenya",
    coords: [-1.2921, 36.8219],
    info: "<strong>East Africa Priory</strong><br>Kenyan operations."
  },
  {
    name: "Johannesburg, South Africa",
    coords: [-26.2041, 28.0473],
    info: "<strong>South Africa Chapel</strong><br>Southern Africa."
  },
  {
    name: "Abidjan, Ivory Coast",
    coords: [5.3600, -4.0083],
    info: "<strong>West Africa Chapel</strong><br>Francophone Africa."
  }
];

// ============================================================================
// CATHOLIC EXTREMIST CHURCHES (Non-SSPX) - USA ONLY
// ============================================================================

// CMRI - Congregation of Mary Immaculate Queen (Sedevacantist - No Pope since 1958)
const cmriChurches = [
  {
    name: "Mount St. Michael, Spokane, Washington",
    coords: [47.7390, -117.3294],
    info: "<strong>Mount St. Michael (CMRI HQ)</strong><br>Sedevacantist headquarters.<br>Rejects all Popes since Pius XII (1958)."
  },
  {
    name: "Mary Immaculate Queen Church, Rathdrum, Idaho",
    coords: [47.8102, -116.8993],
    info: "<strong>CMRI Seminary & Church</strong><br>Sedevacantist training center.<br>St. Joseph Minor Seminary."
  },
  {
    name: "Mater Dei Seminary, Omaha, Nebraska",
    coords: [41.3251, -96.0452],
    info: "<strong>Mater Dei Seminary (CMRI)</strong><br>Sedevacantist seminary.<br>Trains priests who reject Vatican II."
  },
  {
    name: "St. Benedict's Church, Lacey's Spring, Alabama",
    coords: [34.8954, -86.6194],
    info: "<strong>St. Benedict's (CMRI)</strong><br>Sedevacantist. Southern presence."
  },
  {
    name: "Our Lady of the Sun, El Mirage, Arizona",
    coords: [33.6130, -112.3246],
    info: "<strong>Our Lady of the Sun (CMRI)</strong><br>Sedevacantist. Arizona community."
  },
  {
    name: "Queen of the Holy Rosary, Phoenix, Arizona",
    coords: [33.4758, -112.1037],
    info: "<strong>Queen of the Holy Rosary (CMRI)</strong><br>Sedevacantist. Phoenix church."
  },
  {
    name: "Queen of Angels Church, Santa Clarita, California",
    coords: [34.3917, -118.5426],
    info: "<strong>Queen of Angels (CMRI)</strong><br>Sedevacantist. Southern California."
  },
  {
    name: "Mary Help of Christians, Colorado Springs, Colorado",
    coords: [38.8339, -104.8214],
    info: "<strong>Mary Help of Christians (CMRI)</strong><br>Sedevacantist. Colorado community."
  },
  {
    name: "Our Lady of the Snow, Denver, Colorado",
    coords: [39.7392, -104.9903],
    info: "<strong>Our Lady of the Snow (CMRI)</strong><br>Sedevacantist. Denver church."
  },
  {
    name: "Most Holy Trinity Seminary, Brooksville, Florida",
    coords: [28.5553, -82.3887],
    info: "<strong>Most Holy Trinity Seminary (CMRI)</strong><br>Sedevacantist. Major seminary and publishing center."
  },
  {
    name: "Holy Family Church, Melbourne, Florida",
    coords: [28.0836, -80.6081],
    info: "<strong>Holy Family (CMRI)</strong><br>Sedevacantist. Florida community."
  },
  {
    name: "St. Theresa's Church, Oakland, Maine",
    coords: [44.5403, -69.7214],
    info: "<strong>St. Theresa's (CMRI)</strong><br>Sedevacantist. New England presence."
  },
  {
    name: "Most Holy Rosary, Middleville, Michigan",
    coords: [42.7131, -85.4614],
    info: "<strong>Most Holy Rosary (CMRI)</strong><br>Sedevacantist. Church and school."
  },
  {
    name: "St. Joseph's Church, Wayne, Michigan",
    coords: [42.2814, -83.3863],
    info: "<strong>St. Joseph's (CMRI)</strong><br>Sedevacantist. Detroit area."
  },
  {
    name: "St. Joseph's Church, Harmony, Minnesota",
    coords: [43.5522, -92.0129],
    info: "<strong>St. Joseph's (CMRI)</strong><br>Sedevacantist. Minnesota church."
  },
  {
    name: "Immaculate Conception, Sartell, Minnesota",
    coords: [45.6219, -94.2075],
    info: "<strong>Immaculate Conception (CMRI)</strong><br>Sedevacantist. Central Minnesota."
  },
  {
    name: "Our Lady of Mount Carmel, Salem, New Hampshire",
    coords: [42.7876, -71.2009],
    info: "<strong>Our Lady of Mt. Carmel (CMRI)</strong><br>Sedevacantist. New Hampshire mission."
  },
  {
    name: "St. Jude Shrine, Stafford, Texas",
    coords: [29.6161, -95.5577],
    info: "<strong>St. Jude Shrine (CMRI)</strong><br>Sedevacantist. Texas Gulf Coast."
  },
  {
    name: "St. Joseph the Worker, Spring, Texas",
    coords: [30.0799, -95.3777],
    info: "<strong>St. Joseph the Worker (CMRI)</strong><br>Sedevacantist. Houston area."
  }
];

// St. Gertrude the Great Network (Sedevacantist - No Pope since 1958)
const stGertrudeNetwork = [
  {
    name: "St. Gertrude the Great, West Chester, Ohio",
    coords: [39.3292, -84.4041],
    info: "<strong>St. Gertrude the Great</strong><br>Sedevacantist. Bishop Charles McGuire.<br>One of largest sede communities in USA."
  },
  {
    name: "Sacred Heart Church, Lawrence, Massachusetts",
    coords: [42.7070, -71.1631],
    info: "<strong>Sacred Heart Church</strong><br>Sedevacantist. Connected to St. Gertrude network."
  },
  {
    name: "Our Lady Queen of Martyrs, Fraser, Michigan",
    coords: [42.5395, -82.9493],
    info: "<strong>Our Lady Queen of Martyrs</strong><br>Sedevacantist. Detroit area church."
  },
  {
    name: "St. Dominic Chapel, West Highland, Michigan",
    coords: [42.6289, -83.5938],
    info: "<strong>St. Dominic Chapel</strong><br>Sedevacantist. Bishop Robert Neville."
  }
];

// Society of St. Pius V - SSPV (Sedevacantist - More extreme than SSPX)
const sspvChurches = [
  {
    name: "St. Pius V Church, Oyster Bay Cove, New York",
    coords: [40.8679, -73.5126],
    info: "<strong>SSPV Headquarters</strong><br>Sedevacantist. 1983 splinter from SSPX.<br>Rejects all Popes since 1958."
  },
  {
    name: "Immaculate Heart of Mary, Black Eagle, Montana",
    coords: [47.5260, -111.2208],
    info: "<strong>Immaculate Heart (SSPV)</strong><br>Sedevacantist. Montana church."
  },
  {
    name: "Our Lady of Peace, Boynton Beach, Florida",
    coords: [26.5253, -80.0664],
    info: "<strong>Our Lady of Peace (SSPV)</strong><br>Sedevacantist. Florida mission."
  },
  {
    name: "St. Hilary's Church, Baltimore, Maryland",
    coords: [39.2386, -76.5969],
    info: "<strong>St. Hilary's (SSPV)</strong><br>Sedevacantist. Maryland presence."
  }
];

// Conclavists (Elected their own "Pope")
const conclavistChurches = [
  {
    name: "Holy Rosary Church, Topeka, Kansas",
    coords: [39.0473, -95.6752],
    info: "<strong>Holy Rosary Church</strong><br>Conclavist. Elected 'Pope Michael' (David Bawden) in 1990.<br>Claims he is the true Pope."
  }
];

// Extreme Feeneyite Sedevacantists
const feeneyiteChurches = [
  {
    name: "Most Holy Family Monastery, Fillmore, New York",
    coords: [42.4634, -78.1114],
    info: "<strong>Most Holy Family Monastery</strong><br>Extreme sedevacantist + Feeneyite. Dimond Brothers.<br>Rejects baptism of desire. No ordained priests."
  },
  {
    name: "St. Benedict Center, Richmond, New Hampshire",
    coords: [42.7545, -72.2773],
    info: "<strong>St. Benedict Center</strong><br>Feeneyite. 'No salvation outside the Church' literal interpretation.<br>Originally founded by Leonard Feeney."
  }
];

// SSPX Resistance (Broke from SSPX in 2012 - Believes SSPX too liberal)
const sspxResistance = [
  {
    name: "St. Athanasius Chapel, Vienna, Virginia",
    coords: [38.9012, -77.2653],
    info: "<strong>SSPX Resistance Chapel</strong><br>Broke from SSPX 2012. More extreme stance.<br>Washington DC area."
  },
  {
    name: "St. Thomas Aquinas, Broadlands, Virginia",
    coords: [39.0068, -77.5210],
    info: "<strong>SSPX Resistance</strong><br>Bishop Richard Williamson network.<br>Believes SSPX compromised with Rome."
  }
];

// Independent Sedevacantist Churches
const independentSedevacantist = [
  {
    name: "Blessed Sacrament Church, Martinez, California",
    coords: [38.0193, -122.1341],
    info: "<strong>Blessed Sacrament</strong><br>Independent sedevacantist church."
  },
  {
    name: "St. John Bosco, Modesto, California",
    coords: [37.6391, -120.9969],
    info: "<strong>St. John Bosco</strong><br>Independent sedevacantist community."
  },
  {
    name: "Our Lady of the Rosary, Monroe, Connecticut",
    coords: [41.3248, -73.2079],
    info: "<strong>Our Lady of the Rosary</strong><br>Independent sedevacantist chapel."
  },
  {
    name: "Christ the King, Lafayette, Louisiana",
    coords: [30.2241, -92.0198],
    info: "<strong>Christ the King</strong><br>Independent sedevacantist. Louisiana church."
  },
  {
    name: "St. Mary the Virgin, Paulsboro, New Jersey",
    coords: [39.8290, -75.2405],
    info: "<strong>St. Mary the Virgin</strong><br>Independent sedevacantist. New Jersey chapel."
  },
  {
    name: "St. Anthony of Padua, Columbus, Ohio",
    coords: [40.0150, -82.9988],
    info: "<strong>St. Anthony of Padua</strong><br>Independent sedevacantist. Columbus church."
  }
];

// ============================================================================
// COMBINE ALL LOCATIONS
// ============================================================================

// All SSPX Locations (Recognize Pope, resist Vatican II)
const allSSPXLocations = [
  ...sspxHeadquarters,
  ...sspxUSA,
  ...sspxCanada,
  ...sspxEurope,
  ...sspxLatinAmerica,
  ...sspxAsiaPacific,
  ...sspxAfrica
];

// All Catholic Extremist Locations (USA only - Various beliefs about papacy)
const allExtremistLocations = [
  ...cmriChurches,
  ...stGertrudeNetwork,
  ...sspvChurches,
  ...conclavistChurches,
  ...feeneyiteChurches,
  ...sspxResistance,
  ...independentSedevacantist
];

// MASTER ARRAY - All locations combined
const locations = [
  ...allSSPXLocations,
  ...allExtremistLocations
];

// Optional: If you want to separate them on the map with different markers
const sspxLocations = allSSPXLocations;      // ~60 locations
const extremistLocations = allExtremistLocations;  // ~40 locations

    // Map SSPX locations (RED markers)
    allSSPXLocations.forEach(loc => {
      const circle = L.circleMarker(loc.coords, {
        radius: 8,
        color: "red",
        fillColor: "#f03",
        fillOpacity: 0.6
      }).addTo(map);
      
      circle.bindPopup(loc.info);
    });

    // Map American Extremist Catholic locations (BLUE markers)
    allExtremistLocations.forEach(loc => {
      const circle = L.circleMarker(loc.coords, {
        radius: 8,
        color: "blue",
        fillColor: "#03f",
        fillOpacity: 0.6
      }).addTo(map);
      
      circle.bindPopup(loc.info);
    });
        // ===== ADD LEGEND =====
    const legend = L.control({ position: 'bottomright' });

    legend.onAdd = function(map) {
      const div = L.DomUtil.create('div', 'legend');
      div.innerHTML = `
        <h4>Church Types</h4>
        <div><i class="sspx"></i> SSPX Chapels(${allSSPXLocations.length})</div>
        <div><i class="extremist"></i> Sedevacantist Chapels(${allExtremistLocations.length})</div>
      `;
      return div;
    };

    legend.addTo(map);
  </script>
</body>
</html>

